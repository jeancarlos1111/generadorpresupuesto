(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-md",staticStyle:{"background-color":"#ECF0F1"},attrs:{padding:""}},[a("q-form",{on:{submit:t.onSubmit,reset:t.onReset}},[a("div",{staticClass:"row q-col-gutter-md"},[a("q-input",{staticClass:"col-xs-12 col-sm-12 col-md-6",attrs:{filled:"",label:"Cliente *",hint:"Razón Social","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Por favor, escriba algo"}]},model:{value:t.cliente,callback:function(e){t.cliente=e},expression:"cliente"}}),a("q-input",{staticClass:"col-xs-12 col-sm-12 col-md-6",attrs:{filled:"",label:"RIF/CI *",hint:"RIF/CI","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Por favor, escriba algo"}]},model:{value:t.rif,callback:function(e){t.rif=e},expression:"rif"}}),a("q-input",{staticClass:"col-xs-12 col-sm-12 col-md-6",attrs:{filled:"",label:"Fecha *",hint:"Fecha",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{model:{value:t.fecha,callback:function(e){t.fecha=e},expression:"fecha"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.fecha,callback:function(e){t.fecha=e},expression:"fecha"}}),a("q-input",{staticClass:"col-xs-12 col-sm-12 col-md-6",attrs:{filled:"",label:"Dirección *",hint:"Dirección",counter:"","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Por favor, escriba algo"},function(t){return t&&t.length<=60||"Maximo permitido 60"}]},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}}),a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-btn",{attrs:{color:"primary",icon:"add",label:"Items"},on:{click:function(e){t.fixed=!0}}}),a("q-btn",{attrs:{label:"Guardar",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Limpiar",type:"reset",color:"primary",flat:""}}),t.id_imprimir?a("q-btn",{attrs:{color:"primary",icon:"print",label:"Imprimir"},on:{click:function(e){return t.imprimir(t.id_imprimir)}}}):t._e()],1)],1)]),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.fixed,callback:function(e){t.fixed=e},expression:"fixed"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Agregar Items")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("q-input",{staticClass:"col-xs-12 col-sm-12 col-md-4",attrs:{filled:"",type:"number",label:"Cantidad *",hint:"Cantidad","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please type your age"},function(t){return t>0&&t<100||"Please type a real age"}]},model:{value:t.productos.cantidad,callback:function(e){t.$set(t.productos,"cantidad",e)},expression:"productos.cantidad"}}),a("q-input",{staticClass:"col-xs-12 col-sm-12 col-md-4 q-mt-2",attrs:{filled:"",label:"Item *",hint:"Producto","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Por favor, escriba algo"}]},model:{value:t.productos.item_producto,callback:function(e){t.$set(t.productos,"item_producto",e)},expression:"productos.item_producto"}}),a("q-input",{staticClass:"col-xs-12 col-sm-12 col-md-4",attrs:{filled:"",type:"number",label:"P/U *",hint:"Precio Unitario","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please type your age"},function(t){return t>0&&t<100||"Please type a real age"}]},model:{value:t.productos.pu,callback:function(e){t.$set(t.productos,"pu",e)},expression:"productos.pu"}})],1)]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"Cancelar",color:"primary"},on:{click:t.cancelarModal}}),a("q-btn",{attrs:{flat:"",label:"Aceptar",color:"primary"},on:{click:t.agregarItem}})],1)],1)],1),a("q-markup-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Cantidad")]),a("th",{staticClass:"text-left"},[t._v("Item")]),a("th",{staticClass:"text-right"},[t._v("P/U")]),a("th",{staticClass:"text-right"},[t._v("Total")]),a("th",{staticClass:"text-right"},[t._v("Acciones")])])]),a("tbody",t._l(t.items,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"text-left"},[t._v(t._s(e.cantidad))]),a("td",{staticClass:"text-left"},[t._v(t._s(e.item_producto))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.pu))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.cantidad*e.pu))]),a("td",{staticClass:"text-right"},[a("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",color:"negative",round:"",icon:"delete"},on:{click:function(e){return t.eliminarItem(i)}}})],1)])})),0)])],1)},n=[],o=a("7ec2"),r=a.n(o),s=a("c973"),c=a.n(s),l=(a("b0c0"),a("c7cd"),a("a434"),a("d3b7"),a("159b"),a("e9c4"),a("4dec")),u=new l["a"]("presupuestos");u.version(1).stores({presupuestos:"++id, cliente, rif, direccion, fecha, *items, contador"});var d=a("8baf"),p=(a("0da4"),a("d055")),m=a.n(p),f=(a("ac1f"),a("5319"),a("b680"),a("25f0"),a("bd4c"));function g(t){return null!=t?(t=f["b"].addToDate(t,{days:0,month:0}),f["b"].formatDate(t,"DD/MM/YYYY")):""}var h={name:"PageIndex",data:function(){return{formatoFechaDate:g,cliente:null,rif:null,direccion:null,fecha:null,productos:{cantidad:null,item_producto:null,pu:null},items:[],id_imprimir:null,codigoqr:null,fixed:!1}},methods:{onSubmit:function(){var t=this;return c()(r()().mark((function e(){var a,i;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===t.cliente||null===t.rif||null===t.fecha||null===t.direccion||0===t.items.length){e.next=13;break}return e.prev=1,e.next=4,u.presupuestos.add({cliente:t.cliente,rif:t.rif,direccion:t.direccion,productos:t.items,fecha:t.fecha});case 4:a=e.sent,i=t.$q.notify({position:"top",type:"ongoing",message:"Guardando datos..."}),setTimeout((function(){t.id_imprimir=a,i({position:"top",type:"positive",message:"¡Registro guardado!",timeout:1e3})}),1500),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:e.next=14;break;case 13:t.$q.notify({position:"top",type:"negative",message:"¡Rellene los campos por favor!"});case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},onReset:function(){this.name=null,this.age=null,this.accept=!1},cancelarModal:function(){this.productos={},this.fixed=!1},agregarItem:function(){null!==this.productos.cantidad&&null!==this.productos.item_producto&&null!==this.productos.pu?(this.items.push(this.productos),this.productos={},this.fixed=!1):this.$q.notify({position:"top",type:"negative",message:"No se permiten campos vacios"})},eliminarItem:function(t){var e=this,a=this.$q.notify({position:"top",type:"ongoing",message:"Eliminado registro..."});setTimeout((function(){e.items.splice(t,1),a({position:"top",type:"positive",message:"Registro eliminado",timeout:1e3})}),2e3)},imprimir:function(t){var e=this;return c()(r()().mark((function a(){var i,n,o,s,c,l,p,f;return r()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u.presupuestos.get({id:t});case 2:return i=a.sent,n=[],o=0,s=0,i.productos.forEach((function(t){var e=[t.cantidad,t.item_producto,t.pu,new Intl.NumberFormat("es-VE").format(t.cantidad*t.pu)];n.push(e),o+=t.cantidad*t.pu})),c=.16*o,s=o+c,l={errorCorrectionLevel:"H",type:"image/png",quality:.3,margin:1,color:{dark:"#000000",light:"#FCFDF4"}},a.next=12,m.a.toDataURL(JSON.stringify(i),l).then((function(t){console.log(t),e.codigoqr=t})).catch((function(t){console.error(t)}));case 12:return a.next=14,new d["jsPDF"]({compress:!0});case 14:p=a.sent,p.setFontSize(6),p.addImage("logo.jpeg","JPG",10,5,25,25,"logo"),p.setFont("Helvetica","bold"),p.setFontSize(12),p.text("Venta – Recarga y Mantenimiento de Extintores",p.internal.pageSize.width-105,17,{align:"center"}),p.text("Instalación de sistemas de incendios – Robo",p.internal.pageSize.width-105,22,{align:"center"}),p.text("Cercos Eléctricos y Motores",p.internal.pageSize.width-105,27,{align:"center"}),p.text("RIF J-408789191",p.internal.pageSize.width-105,32,{align:"center"}),p.setFont("Helvetica","bold"),p.text("Fecha: ".concat(g(i.fecha)),p.internal.pageSize.width-187,40,{align:"center"}),p.text("PRESUPUESTO: N° ".concat(i.id),p.internal.pageSize.width-50,40,{align:"center"}),p.setFontSize(11),p.text(p.internal.pageSize.width-187,53,"RIF/CI: ".concat(i.rif),{align:"center"}),p.text(p.internal.pageSize.width-140,53,"Cliente: ".concat(i.cliente),{align:"center"}),p.setFontSize(11),p.text(5,57,"Dirección: ".concat(i.direccion),{align:"left",maxWidth:150}),p.autoTable({margin:{top:65},theme:"grid",styles:{halign:"center"},head:[["N° CANTI","PRODUCTO","P/U","TOTAL Bs $"]],body:n}),f=p.lastAutoTable.finalY||10,p.text("Sub total:  ".concat(new Intl.NumberFormat("es-VE").format(o)),155,f+6,{align:"center"}),p.text("IVA 16%:     ".concat(new Intl.NumberFormat("es-VE").format(c)),155,f+12,{align:"center"}),p.text("Total:        ".concat(new Intl.NumberFormat("es-VE").format(s)),155,f+18,{align:"center"}),p.setTextColor(0,0,0),p.addImage(e.codigoqr,"PNG",p.internal.pageSize.width-58,p.internal.pageSize.height-60,45,45),p.setFont("Courier","bold").setFontSize(10),p.setFont("Courier","bold").setFontSize(10),p.setFont("Courier","bold").setFontSize(8),p.setFont("Courier","bold").setFontSize(8),p.save("presupuesto.pdf");case 43:case"end":return a.stop()}}),a)})))()}}},b=h,x=a("2877"),v=a("9989"),C=a("0378"),y=a("27f9"),q=a("0016"),w=a("7cbe"),F=a("52ee"),S=a("9c40"),_=a("24e8"),k=a("f09f"),I=a("a370"),z=a("eb85"),P=a("4b7e"),D=a("2bb1"),R=a("7f67"),T=a("eebe"),Q=a.n(T),E=Object(x["a"])(b,i,n,!1,null,null,null);e["default"]=E.exports;Q()(E,"components",{QPage:v["a"],QForm:C["a"],QInput:y["a"],QIcon:q["a"],QPopupProxy:w["a"],QDate:F["a"],QBtn:S["a"],QDialog:_["a"],QCard:k["a"],QCardSection:I["a"],QSeparator:z["a"],QCardActions:P["a"],QMarkupTable:D["a"]}),Q()(E,"directives",{ClosePopup:R["a"]})}}]);